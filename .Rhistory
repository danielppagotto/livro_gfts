'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')
) %>%
select(CODUFMUN, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) %>%
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
# Defina o seu conjunto de dados em R (substitua este exemplo com seus próprios dados)
# Certifique-se de que o conjunto de dados contém as colunas CODUFMUN, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
# Filtrar dados
consulta_inicial <- cnes_PF %>%
filter(
COMPETEN == '202301',
substr(CBO, 1, 3) == '225',
CODUFMUN %in% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')
) %>%
select(CODUFMUN, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) %>%
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
# Consulta individual
consulta_ch_individual <- consulta_inicial %>%
group_by(CODUFMUN, CPF_PROF) %>%
summarise(CH_INDIVIDUAL = sum(HORA))
# Média por município
media_prof <- consulta_ch_individual %>%
group_by(CODUFMUN) %>%
summarise(MEDIA_PROF = mean(CH_INDIVIDUAL)) %>%
arrange(MEDIA_PROF)
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
library(readr)
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
# Defina o seu conjunto de dados em R (substitua este exemplo com seus próprios dados)
# Certifique-se de que o conjunto de dados contém as colunas CODUFMUN, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
# Filtrar dados
consulta_inicial <- cnes_PF %>%
filter(
COMPETEN == '202301',
substr(CBO, 1, 3) == '225',
CODUFMUN %in% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')
) %>%
select(CODUFMUN, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) %>%
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
consulta_ch_individual <- consulta_inicial %>%
group_by(CODUFMUN, CPF_PROF) %>%
summarise(CH_INDIVIDUAL = sum(HORA))
media_prof <- consulta_ch_individual %>%
group_by(CODUFMUN) %>%
summarise(MEDIA_PROF = mean(CH_INDIVIDUAL)) %>%
arrange(MEDIA_PROF)
# Visualizar o resultado
print(media_prof)
View(media_prof)
consulta_ch_individual <- consulta_inicial %>%
group_by(CODUFMUN, CPF_PROF) %>%
summarise(CH_INDIVIDUAL = sum(HORA))
View(consulta_ch_individual)
View(consulta_inicial)
consulta_inicial <- cnes_PF %>%
filter(
COMPETEN == '202301',
substr(CBO, 1, 3) == '225',
CODUFMUN %in% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')
) %>%
select(CODUFMUN, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) %>%
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
consulta_inicial <- cnes_PF %>%
filter(
COMPETEN == '202301',
substr(CBO, 1, 3) == '225',
CODUFMUN %in% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')
) %>%
select(CODUFMUN, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) %>%
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
consulta_inicial <- cnes_PF %>%
filter(
COMPETEN == '202301',
substr(CBO, 1, 3) == '225',
CODUFMUN %in% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')
) %>%
select(CODUFMUN, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB)
consulta_inicial <- cnes_PF %>%
filter(
COMPETEN == '202301',
substr(CBO, 1, 3) == '225',
CODUFMUN %in% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')
) %>%
select(CODUFMUN, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB)
# Filtrar dados
consulta_inicial <- cnes_PF %>%
filter(
COMPETEN == '202301',
substr(CBO, 1, 3) == '225',
CODUFMUN %in% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')
) %>%
select(CODUFMUN, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) %>%
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
# Filtrar dados
consulta_inicial <- cnes_PF %>%
filter(
COMPETEN == '202301',
substr(CBO, 1, 3) == '225',
CODUFMUN %>% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')
) %>%
select(CODUFMUN, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) %>%
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
consulta_inicial <- cnes_PF %>%
filter(
COMPETEN == '202301',
substr(CBO, 1, 3) == '225')
consulta_inicial <- cnes_PF %>%
filter(
COMPETEN == '202301'
cnes_pf_manutencao <- read_csv("bases_apoio/cnes_pf_manutencao.csv")
cnes_pf_manutencao <- read_csv("bases_apoio/cnes_pf_manutencao.csv")
cnes_tratado <-
cnes_pf_manutencao |>
filter(str_detect(CBO, "225")) |>
select(CODUFMUN, CBO, VINCULAC)
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
cnes_tratado <-
cnes_pf_manutencao |>
filter(str_detect(CBO, "225")) |>
select(CODUFMUN, CBO, VINCULAC)
cnes_tratado <-
cnes_pf_manutencao |>
filter(str_detect(CBO, "225")) |>
select(CODUFMUN, CBO, VINCULAC)
View(cnes_tratado)
cnes_tratado <-
cnes_pf_manutencao |>
filter(COMPETEN == '202301',
str_detect(CBO, "225")) |>
select(CODUFMUN, CBO, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB)
View(cnes_tratado)
cnes_tratado <-
cnes_pf_manutencao |>
filter(COMPETEN == '202301',
str_detect(CBO, "225")) |>
select(CODUFMUN, CBO, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) |>
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
View(cnes_tratado)
consulta_ch_individual <- cnes_tratado %>%
group_by(CODUFMUN, CPF_PROF) %>%
summarise(CH_INDIVIDUAL = sum(HORA))
View(consulta_ch_individual)
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
cnes_tratado <-
cnes_pf_manutencao |>
filter(COMPETEN == '202301',
str_detect(CBO, "225"),
CODUFMUN %in% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100') |>
select(CODUFMUN, CBO, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) |>
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
View(cnes_tratado)
View(cnes_tratado)
cnes_tratado <-
cnes_pf_manutencao |>
filter(COMPETEN == '202301',
str_detect(CBO, "225"),
CODUFMUN %in% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')) |>
select(CODUFMUN, CBO, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) |>
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
View(cnes_tratado)
cnes_tratado <-
cnes_pf_manutencao |>
filter(COMPETEN == '202301',
str_detect(CBO, "225"),
CODUFMUN %in% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100'))
View(cnes_tratado)
cnes_pf_manutencao <- read_csv("bases_apoio/cnes_pf_manutencao.csv")
View(cnes_pf_manutencao)
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_tratado <-
cnes_PF |>
filter(COMPETEN == '202301',
str_detect(CBO, "225"),
CODUFMUN %in% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100'))
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_tratado <-
cnes_PF |>
filter(COMPETEN == '202301'
cnes_tratado <-
cnes_tratado <-
cnes_PF %>%
filter(COMPETEN == '202301',
str_detect(CBO, "225")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_PF <- read_csv("bases_apoio/cnes.PF.csv")
cnes_tratado <-
cnes_PF %>%
filter(COMPETEN == '202301',
str_detect(CBO, "225")
cnes_tratado <-
cnes_tratado <-
cnes_PF %>%
filter(COMPETEN == '202301',
str_detect(CBO, "225"),
CODUFMUN %in% c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')) |>
select(CODUFMUN, CBO, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) |>
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
View(cnes_PF)
capitais <- c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')
cnes_tratadoo <-
cnes_PF %>%
filter(COMPETEN == '202301',
str_detect(CBO, "225"),
CODUFMUN %in% capitais)
cnes_tratadoo <-
cnes_PF %>%
filter(COMPETEN == '202301',
str_detect(CBO, "225")
cnes_tratadoo <-
cnes_tratadoo <-
cnes_PF %>%
filter(COMPETEN == '202301')
cnes_tratadoo <-
cnes_PF
cnes_tratadoo <-
cnes_PF %>%
filter(COMPETEN == '202301')
select(CODUFMUN, CBO, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) %>%
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
print(nrow(cnes_PF))
cnes_tratado <- cnes_PF %>% filter(COMPETEN == '202301')
print(nrow(cnes_tratado))
(str(cnes_PF))
cnes_tratadoo <-
cnes_PF %>%
mutate(COMPETEN = as.character(COMPETEN))
filter(COMPETEN == '202301')
cnes_tratadoo <-
cnes_PF %>%
mutate(COMPETEN = as.character(COMPETEN))
cnes_tratado <-
cnes_PF %>%
mutate(COMPETEN = as.character(COMPETEN))
cnes_tratado <-
cnes_PF %>%
mutate(COMPETEN = as.character(COMPETEN)) %>%
filter(COMPETEN == '202301')
View(cnes_tratado)
cnes_tratado <-
cnes_PF %>%
mutate(COMPETEN = as.character(COMPETEN))
af <- cnes_tratado %>%
filter(COMPETEN == '202301')
View(cnes_tratado)
af <- cnes_tratado %>%
filter(COMPETEN == '202305')
cnes_tratado <-
cnes_PF %>%
mutate(COMPETEN = as.character(COMPETEN)) %>%
filter(COMPETEN == '202305'),
cnes_tratado <-
cnes_PF %>%
mutate(COMPETEN = as.character(COMPETEN)) %>%
filter(COMPETEN == '202305',
str_detect(CBO, "225"),
CODUFMUN %in% capitais) %>%
select(CODUFMUN, CBO, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) %>%
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
consulta_ch_individual <- cnes_tratado %>%
group_by(CODUFMUN, CPF_PROF) %>%
summarise(CH_INDIVIDUAL = sum(HORA))
View(consulta_ch_individual)
capitais <- c('120040', '270430', '160030', '130260',
'292740', '230440', '530010', '320530',
'520870', '211130', '510340', '500270',
'310620', '150140', '250750', '410690',
'261160', '221100', '330455', '240810',
'431490', '110020', '140010', '420540',
'355030', '280030', '172100')
cnes_tratado <-
cnes_PF %>%
mutate(COMPETEN = as.character(COMPETEN)) %>%
filter(COMPETEN == '202305',
str_detect(CBO, "225"),
CODUFMUN %in% capitais) %>%
select(CODUFMUN, CBO, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) %>%
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
View(cnes_tratado)
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
cnes_tratado <-
cnes_PF %>%
mutate(COMPETEN = as.character(COMPETEN)) %>%
filter(COMPETEN == '202305',
str_detect(CBO, "225") %>%
select(CODUFMUN, CBO, CPF_PROF, HORAOUTR, HORAHOSP, HORA_AMB) %>%
mutate(HORA = HORAOUTR + HORAHOSP + HORA_AMB)
View(cnes_tratado)
View(cnes_tratado)
library(readr)
ch_media_capitais <- read_csv("bases_apoio/ch_media_capitais.csv")
hierarquia_municipios <- read_excel("bases_apoio/hierarquia_municipios.xlsx")
library(readxl)
hierarquia_municipios <- read_excel("bases_apoio/hierarquia_municipios.xlsx")
View(hierarquia_municipios)
View(ch_media_capitais)
ch_media_capitais <- ch_media_capitais %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio"))
library(readr)
library(dplyr)
library(genderBR)
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
ch_media_capitais <- ch_media_capitais %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio"))
View(ch_media_capitais)
ch_media_capitais <- read_csv("bases_apoio/ch_media_capitais.csv")
View(ch_media_capitais)
ch_media_capitais <- ch_media_capitais %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
select("cod_municipio", "MEDIA_PROF")
ch_media_capitais <- ch_media_capitais %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
select("cod_municipio", "MEDIA_PROF")
ch_media_capitais <- ch_media_capitais %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
select('cod_municipio', 'MEDIA_PROF')
ch_media_capitais <- ch_media_capitais %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
select("cod_municipio", "MEDIA_PROF")
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
select("uf_sigla", "CBO", "CPF_PROF", "municipio_pad")
View(vinculos_medio)
ch_media_capitais <- ch_media_capitais %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
select("municipio_pad", "MEDIA_PROF")
View(ch_media_capitais)
library(forcats) #ordernar coluna
ch_media_capitais %>%
mutate(municipio_pad = fct_reorder(municipio_pad, MEDIA_PROF)) %>%
ggplot(aes(x = municipio_pad, y = MEDIA_PROF)) +
geom_col(color = "White") +
coord_flip() +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional")
ch_media_capitais %>%
ggplot(aes(x = 1, y = MEDIA_PROF)) +
geom_violin(fill = "purple") +
theme_void() +
labs(x = "", y = "Média de Vínculos", title = "Média de Vínculos por Profissional")
hierarquia_municipios <- read_excel("bases_apoio/hierarquia_municipios.xlsx")
ch_media_capitais <- read_csv("bases_apoio/ch_media_capitais.csv")
View(hierarquia_municipios)
View(ch_media_capitais)
ch_media_capitais <- ch_media_capitais %>%
left_join(hierarquia_municipios, by = c("CODUFMUN" = "cod_municipo")) %>%
select("municipio_pad", "MEDIA_PROF")
ch_media_capitais <- ch_media_capitais %>%
left_join(hierarquia_municipios, by = c("cod_municipo" = "CODUFMUN")) %>%
select("municipio_pad", "MEDIA_PROF")
ch_media_capitais <- ch_media_capitais %>%
left_join(hierarquia_municipios, by = c("CODUFMUN" = "cod_municipio")) %>%
select("municipio_pad", "MEDIA_PROF")
ch_media_capitais %>%
ggplot(aes(x = MEDIA_PROF, y = municipio_pad)) +
geom_point(color = "blue") +
theme_bw() +
labs(x = "Média de Vínculos", y = "Município", title = "Média de Vínculos por Profissional")
ch_media_capitais %>%
ggplot(aes(x = municipio_pad, y = MEDIA_PROF, group = 1)) +
geom_line(color = "green") +
geom_point(color = "green", size = 2) +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional")
ch_media_capitais %>%
ggplot(aes(x = municipio_pad, y = MEDIA_PROF, fill = factor(MEDIA_PROF))) +
geom_bar(stat = "identity") +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional")
ch_media_capitais %>%
ggplot(aes(x = "", y = MEDIA_PROF, fill = municipio_pad)) +
geom_bar(stat = "identity", width = 1) +
coord_polar(theta = "y") +
theme_void() +
labs(x = "", y = "Média de Vínculos", title = "Média de Vínculos por Profissional")
ch_media_capitais %>%
mutate(municipio_pad = fct_reorder(municipio_pad, MEDIA_PROF)) %>%
ggplot(aes(x = municipio_pad, y = MEDIA_PROF)) +
geom_col(color = "White") +
coord_flip() +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional")
ch_media_capitais %>%
mutate(municipio_pad = fct_reorder(municipio_pad, MEDIA_PROF)) %>%
ggplot(aes(x = municipio_pad, y = MEDIA_PROF)) +
geom_col(color = "White") +
coord_flip() +
theme_bw() +
labs(x = "Capitais", y = "Média de horas trabalhadas", title = "Carga horária de trabalho média")
