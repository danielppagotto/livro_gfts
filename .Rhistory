mutate(freq = round(freq, 2)) %>%
filter(sexo == "Female")
# Chunk 1
#| warning: FALSE
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
# Chunk 2
#| echo: FALSE
#| output: FALSE
library(readr)
cnes_pf_manutencao <- read_csv("bases_apoio/cnes_pf_manutencao.csv")
# Chunk 3
#| warning: FALSE
#| eval: FALSE
cnes_pf_rr <- fetch_datasus(year_start = 2023, month_start = 1,
year_end = 2023, month_end = 1,
uf = "RR", information_system = "CNES-PF")
# Chunk 4
cnes_tratado <-
cnes_pf_manutencao |>
filter(str_detect(CBO, "2235")) |>
select(CODUFMUN, CBO, VINCULAC)
# Chunk 5
#| warning: false
vinculac <- read_delim("bases_apoio/vinculac.csv",
delim = ";", escape_double = FALSE, trim_ws = TRUE)
vinculac |>
datatable()
# Chunk 6
# transformando a variável para tipo numérico para conseguir juntar
cnes_tratado$VINCULAC <- as.numeric(cnes_tratado$VINCULAC)
# Juntar conforme as duas colunas equivalentes - VINCULAC e CHAVE
cnes_join <-
cnes_tratado |>
left_join(vinculac, by = c("VINCULAC"="CHAVE"))
cnes_join |>
head()
# Chunk 7
cnes_join <-
cnes_join |>
count(CODUFMUN, classificacao) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) |>
mutate(freq = round(freq, 2))
hierarquia_municipios <- read_excel("bases_apoio/hierarquia_municipios.xlsx")
precarizacao <-
cnes_join |>
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) |>
select(CODUFMUN, cod_municipiodv, municipio, uf_sigla, classificacao, freq )
precarizacao |>
datatable()
# Chunk 8
precarizacao <-
precarizacao |>
filter(classificacao == "Precarizado")
# Chunk 9
#| warning: FALSE
#| output: FALSE
rr <- read_municipality(code_muni = "RR", year = 2020)
rr$code_muni <- as.character(rr$code_muni)
shapefile_combinado <- merge(x = rr,
y = precarizacao,
by.x = "code_muni",
by.y = "cod_municipiodv")
# Chunk 10
shapefile_combinado |>
mapview(zcol = "freq")
# Chunk 11
#| warning: FALSE
library(readr)
library(dplyr)
library(genderBR)
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
# Chunk 12
#| warning: FALSE
ind_prof_goias <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
# Chunk 13
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
mutate(sexo = get_gender(NOMEPROF))
# Chunk 14
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
mutate(freq = round(freq, 2)) %>%
filter(sexo == "Female")
# Chunk 15
maps_GO <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
# Chunk 16
#| warning: FALSE
#| output: FALSE
go <- read_municipality(code_muni = "GO", year = 2020)
go$code_muni <- as.character(go$code_muni)
go <- go %>%
mutate(cod_muni_6 = substr(code_muni, 1, 6))
shapefile_combinado <- merge(x = go,
y = ind_prof_goias,
by.x = "cod_muni_6",
by.y = "CODUFMUN")
shapefile_combinado |>
mapview(zcol = "freq")
<<<<<<< HEAD
library(microdatasus)
#| warning: FALSE
library(microdatasus)
library(tidyverse)
=======
remotes::install_github("rfsaldanha/microdatasus")
remotes::install_github("rfsaldanha/microdatasus")
#| warning: FALSE
library(microdatasus)
install.packages("microdatasus")
remotes::install_github("rfsaldanha/microdatasus")
install.packages("read.dbc")
remotes::install_github("rfsaldanha/microdatasus")
devtools::install_github("danicat/read.dbc")
install.packages("read.dbc")
#| warning: FALSE
ind_prof_goias <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
#| warning: FALSE
library(readr)
library(dplyr)
library(genderBR)
library(microdatasus)
>>>>>>> 173caa7b538cedc42c8a86e356fb0f12fd8e3e27
library(DT)
library(readxl)
library(mapview)
library(geobr)
<<<<<<< HEAD
=======
#| warning: FALSE
ind_prof_goias <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
mutate(sexo = get_gender(NOMEPROF))
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
mutate(freq = round(freq, 2)) %>%
filter(sexo == "Female")
maps_GO <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
#| warning: FALSE
#| output: FALSE
go <- read_municipality(code_muni = "GO", year = 2020)
go$code_muni <- as.character(go$code_muni)
go <- go %>%
mutate(cod_muni_6 = substr(code_muni, 1, 6))
shapefile_combinado <- merge(x = go,
y = ind_prof_goias,
by.x = "cod_muni_6",
by.y = "CODUFMUN")
shapefile_combinado |>
mapview(zcol = "freq")
>>>>>>> 173caa7b538cedc42c8a86e356fb0f12fd8e3e27
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv")
#| warning: FALSE
library(readr)
library(dplyr)
library(genderBR)
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv")
View(vinculos_medio)
vinculos_medio %>%
group_by(CPF_PROF, CODUFMUN) %>%
count()
qtd_vinculos <- vinculos_medio %>%
group_by(CPF_PROF, CODUFMUN) %>%
count()
qtd_vinculos %>%
group_by(CODUFMUN) %>%
summarise(media_vinc = mean(n)) %>%
order_by(media_vinc)
qtd_vinculos %>%
group_by(CODUFMUN) %>%
summarise(media_vinc = mean(n)) %>%
order_by(media_vinc)
qtd_vinculos %>%
group_by(CODUFMUN) %>%
summarise(media_vinc = mean(n)) %>%
arrange(media_vinc)
vinc_municipios <- qtd_vinculos %>%
group_by(CODUFMUN) %>%
summarise(media_vinc = mean(n)) %>%
arrange(media_vinc)
View(vinc_municipios)
vinc_municipios %>%
slice_max(media_vinc, 10)
vinc_municipios %>%
slice_max(media_vinc, n = 10)
vinc_municipios %>%
slice_max(media_vinc, n = 10)
vinc_municipios %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = CODUFMUN, y = media_vinc)) + geom_col() + coord_flip() +
theme_minimal()
vinc_municipios <- qtd_vinculos %>%
group_by(CODUFMUN) %>%
summarise(media_vinc = mean(n)) %>%
arrange(media_vinc) %>%
ungroup()
vinc_municipios %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = CODUFMUN, y = media_vinc)) + geom_col() + coord_flip() +
theme_minimal()
qtd_vinculos <- vinculos_medio %>%
group_by(CPF_PROF, CODUFMUN) %>%
count() %>%
ungroup()
vinc_municipios <- qtd_vinculos %>%
group_by(CODUFMUN) %>%
summarise(media_vinc = mean(n)) %>%
arrange(media_vinc) %>%
ungroup()
vinc_municipios <- qtd_vinculos %>%
group_by(CODUFMUN) %>%
summarise(media_vinc = mean(n)) %>%
arrange(media_vinc) %>%
ungroup()
vinc_municipios %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = CODUFMUN, y = media_vinc)) + geom_col() + coord_flip() +
theme_minimal()
#| echo: FALSE
#| output: FALSE
library(readr)
cnes_pf_manutencao <- read_csv("bases_apoio/cnes_pf_manutencao.csv")
#| warning: FALSE
#| eval: FALSE
cnes_pf_rr <- fetch_datasus(year_start = 2023, month_start = 1,
year_end = 2023, month_end = 1,
uf = "RR", information_system = "CNES-PF")
cnes_tratado <-
cnes_pf_manutencao |>
filter(str_detect(CBO, "2235")) |>
select(CODUFMUN, CBO, VINCULAC)
#| warning: false
vinculac <- read_delim("bases_apoio/vinculac.csv",
delim = ";", escape_double = FALSE, trim_ws = TRUE)
vinculac |>
datatable()
# transformando a variável para tipo numérico para conseguir juntar
cnes_tratado$VINCULAC <- as.numeric(cnes_tratado$VINCULAC)
# Juntar conforme as duas colunas equivalentes - VINCULAC e CHAVE
cnes_join <-
cnes_tratado |>
left_join(vinculac, by = c("VINCULAC"="CHAVE"))
cnes_join |>
head()
View(cnes_join)
View(vinculos_medio)
View(hierarquia_municipios)
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("cod_municipio" = "CODUFMUN"))
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("CODUFMUN" = "cod_municipio"))
View(vinculos_medio)
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv")
View(vinculos_medio)
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
filter(uf, CBO)
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
filter("uf", "CBO")
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
filter("UF", "CBO")
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
select("UF", "CBO")
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
select("uf", "CBO")
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio"))
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
select("uf", "CBO")
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
select("uf.x", "CBO")
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio"))
vinculos_medio <- read_csv("bases_apoio/vinculos_medio.csv") %>%
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) %>%
select("uf_sigla", "CBO", "CPF_PROF", "municipio_pad")
qtd_vinculos <- vinculos_medio %>%
group_by(CPF_PROF, CODUFMUN) %>%
count() %>%
ungroup()
qtd_vinculos <- vinculos_medio %>%
group_by(CPF_PROF, municipio_pad) %>%
count() %>%
ungroup()
vinc_municipios <- qtd_vinculos %>%
group_by(municipio_pad) %>%
summarise(media_vinc = mean(n)) %>%
arrange(media_vinc) %>%
ungroup()
vinc_municipios %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc)) + geom_col() + coord_flip() +
theme_minimal()
library(forcats)
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc)) +
geom_col() +
coord_flip() +
theme_minimal()
vinc_municipios %>%
rename("Município" = municipio_pad, "Média de vinculos" = media_vinc) %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc)) +
geom_col() +
coord_flip() +
theme_minimal()
vinc_municipios %>%
rename("Municipio" = municipio_pad, "Media_Vinculos" = media_vinc) %>%
mutate(Municipio = fct_reorder(Municipio, Media_Vinculos)) %>%
slice_max(Media_Vinculos, n = 10) %>%
ggplot(aes(x = Municipio, y = Media_Vinculos)) +
geom_col() +
coord_flip() +
theme_minimal()
vinc_municipios %>%
rename("Municipio" = municipio_pad, "Media_Vinculos" = media_vinc) %>%
mutate(Municipio = fct_reorder(Municipio, Media_Vinculos)) %>%
slice_max(Media_Vinculos, n = 10) %>%
ggplot(aes(x = Municipio, y = Media_Vinculos)) +
geom_col() +
coord_flip() +
theme_bw()
vinc_municipios %>%
rename("Municipio" = municipio_pad, "Media_Vinculos" = media_vinc) %>%
mutate(Municipio = fct_reorder(Municipio, Media_Vinculos)) %>%
slice_max(Media_Vinculos, n = 10) %>%
ggplot(aes(x = Municipio, y = Media_Vinculos)) +
geom_col() +
coord_flip() +
theme_classic()
vinc_municipios %>%
rename("Municipio" = municipio_pad, "Media_Vinculos" = media_vinc) %>%
mutate(Municipio = fct_reorder(Municipio, Media_Vinculos)) %>%
slice_max(Media_Vinculos, n = 10) %>%
ggplot(aes(x = Municipio, y = Media_Vinculos)) +
geom_col() +
coord_flip() +
theme_dark()
vinc_municipios %>%
rename("Municipio" = municipio_pad, "Media_Vinculos" = media_vinc) %>%
mutate(Municipio = fct_reorder(Municipio, Media_Vinculos)) %>%
slice_max(Media_Vinculos, n = 10) %>%
ggplot(aes(x = Municipio, y = Media_Vinculos)) +
geom_col() +
coord_flip() +
theme_gray()
vinc_municipios %>%
rename("Municipio" = municipio_pad, "Media_Vinculos" = media_vinc) %>%
mutate(Municipio = fct_reorder(Municipio, Media_Vinculos)) %>%
slice_max(Media_Vinculos, n = 10) %>%
ggplot(aes(x = Municipio, y = Media_Vinculos)) +
geom_col() +
coord_flip() +
theme_light()
vinc_municipios %>%
rename("Municipio" = municipio_pad, "Media_Vinculos" = media_vinc) %>%
mutate(Municipio = fct_reorder(Municipio, Media_Vinculos)) %>%
slice_max(Media_Vinculos, n = 10) %>%
ggplot(aes(x = Municipio, y = Media_Vinculos)) +
geom_col() +
coord_flip() +
theme_light()
vinc_municipios %>%
rename("Municipio" = municipio_pad, "Media_Vinculos" = media_vinc) %>%
mutate(Municipio = fct_reorder(Municipio, Media_Vinculos)) %>%
slice_max(Media_Vinculos, n = 10) %>%
ggplot(aes(x = Municipio, y = Media_Vinculos)) +
geom_col() +
coord_flip() +
theme_bw()
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(Municipio, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc)) +
geom_col() +
coord_flip() +
theme_bw()
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc)) +
geom_col() +
coord_flip() +
theme_bw()
labs(x = "Novo Nome do Eixo X", y = "Novo Nome do Eixo Y", title = "Título do Gráfico")
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc)) +
geom_col() +
coord_flip() +
theme_bw() +
labs(x = "Novo Nome do Eixo X", y = "Novo Nome do Eixo Y", title = "Título do Gráfico")
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc)) +
geom_col(color = "White") +
coord_flip() +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional")
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc, fill = municipio_pad)) +
geom_col(color = "White") +
coord_flip() +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional") +
scale_fill_viridis_d()
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc)) +
geom_col(color = "White") +
coord_flip() +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional") +
scale_fill_viridis_d()
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc, fill = municipio_pad)) +
geom_col(color = "White") +
coord_flip() +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional") +
scale_fill_manual(values = rep(blue, nrow(vinc_municipios)))
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc, fill = municipio_pad)) +
geom_col(color = "White") +
coord_flip() +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional") +
scale_fill_brewer(palette = "Blues")
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc, fill = municipio_pad)) +
geom_col(color = "White") +
coord_flip() +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional") +
scale_fill_brewer(palette = "Blue")
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc, fill = municipio_pad)) +
geom_col(color = "White") +
coord_flip() +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional") +
scale_fill_brewer(palette = "Blues")
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc, fill = municipio_pad)) +
geom_col(color = "White") +
coord_flip() +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional")
vinc_municipios %>%
mutate(municipio_pad = fct_reorder(municipio_pad, media_vinc)) %>%
slice_max(media_vinc, n = 10) %>%
ggplot(aes(x = municipio_pad, y = media_vinc)) +
geom_col(color = "White") +
coord_flip() +
theme_bw() +
labs(x = "Município", y = "Média de Vínculos", title = "Média de Vínculos por Profissional")
View(qtd_vinculos)
View(vinculos_medio)
