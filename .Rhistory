#| warning: FALSE
library(microdatasus)
#| warning: FALSE
library(microdatasus)
#| warning: FALSE
library(microdatasus)
install.packages('microdatasus')
#| warning: FALSE
library(microdatasus)
precarizacao <-
precarizacao |>
filter(classificacao == "Precarizado")
precarizacao <-
precarizacao |>
filter(classificacao == "Precarizado")
precarizacao <-
precarizacao |>
filter(classificacao == "Precarizado")
remotes::install_github("rfsaldanha/microdatasus")
library(microdatasus)
#| warning: FALSE
remotes::install_github("rfsaldanha/microdatasus")
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
#| warning: FALSE
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
#| echo: FALSE
#| output: FALSE
library(readr)
cnes_pf_manutencao <- read_csv("bases_apoio/cnes_pf_manutencao.csv")
#| warning: FALSE
#| eval: FALSE
cnes_pf_rr <- fetch_datasus(year_start = 2023, month_start = 1,
year_end = 2023, month_end = 1,
uf = "RR", information_system = "CNES-PF")
cnes_tratado <-
cnes_pf_manutencao |>
filter(str_detect(CBO, "2235")) |>
select(CODUFMUN, CBO, VINCULAC)
#| warning: false
vinculac <- read_delim("bases_apoio/vinculac.csv",
delim = ";", escape_double = FALSE, trim_ws = TRUE)
vinculac |>
datatable()
# transformando a variável para tipo numérico para conseguir juntar
cnes_tratado$VINCULAC <- as.numeric(cnes_tratado$VINCULAC)
# Juntar conforme as duas colunas equivalentes - VINCULAC e CHAVE
cnes_join <-
cnes_tratado |>
left_join(vinculac, by = c("VINCULAC"="CHAVE"))
cnes_join |>
head()
cnes_join <-
cnes_join |>
count(CODUFMUN, classificacao) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) |>
mutate(freq = round(freq, 2))
hierarquia_municipios <- read_excel("bases_apoio/hierarquia_municipios.xlsx")
precarizacao <-
cnes_join |>
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) |>
select(CODUFMUN, cod_municipiodv, municipio, uf_sigla, classificacao, freq )
precarizacao |>
datatable()
precarizacao <-
precarizacao |>
filter(classificacao == "Precarizado")
#| warning: FALSE
#| output: FALSE
rr <- read_municipality(code_muni = "RR", year = 2020)
rr$code_muni <- as.character(rr$code_muni)
shapefile_combinado <- merge(x = rr,
y = precarizacao,
by.x = "code_muni",
by.y = "cod_municipiodv")
shapefile_combinado |>
mapview(zcol = "freq")
View(precarizacao)
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
filter(sexo == "Female")
View(ind_prof_goias)
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
filter(sexo == "Female")
ind_prof_goias <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
ind_prof_goias <- ind_prof_goias %>%
mutate(sexo = get_gender(NOMEPROF))
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
filter(sexo == "Female")
View(ind_prof_goias)
GO <- read_municipality(code_muni = "GO", year = 2020)
GO$code_muni <- as.character(GO$code_muni)
#| warning: FALSE
library(readr)
library(dplyr)
library(genderBR)
#| warning: FALSE
library(readr)
library(dplyr)
library(genderBR)
#| warning: FALSE
ind_prof_goias <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
mutate(sexo = get_gender(NOMEPROF))
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
filter(sexo == "Female")
maps_GO <-
ind_prof_goias
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
filter(sexo == "Female")
#| warning: FALSE
ind_prof_goias <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
mutate(sexo = get_gender(NOMEPROF))
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
filter(sexo == "Female")
maps_GO <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
#| warning: FALSE
#| output: FALSE
GO <- read_municipality(code_muni = "GO", year = 2020)
#| warning: FALSE
#| output: FALSE
GO <- read_municipality(code_muni = "go", year = 2020)
#| warning: FALSE
#| output: FALSE
GO <- read_municipality(code_muni = "RR", year = 2020)
#| warning: FALSE
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
#| warning: FALSE
library(readr)
library(dplyr)
library(genderBR)
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
#| warning: FALSE
ind_prof_goias <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
mutate(sexo = get_gender(NOMEPROF))
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
filter(sexo == "Female")
#| warning: FALSE
#| output: FALSE
GO <- read_municipality(code_muni = "GO", year = 2020)
GO$code_muni <- as.character(GO$code_muni)
shapefile_combinado <- merge(x = rr,
y = precarizacao,
by.x = "code_muni",
by.y = "cod_municipiodv")
#| warning: FALSE
#| output: FALSE
GO <- read_municipality(code_muni = "GO", year = 2020)
GO$code_muni <- as.character(GO$code_muni)
shapefile_combinado <- merge(x = go,
y = precarizacao,
by.x = "code_muni",
by.y = "cod_municipiodv")
go <- read_municipality(code_muni = "GO", year = 2020)
go$code_muni <- as.character(go$code_muni)
#| echo: FALSE
#| output: FALSE
library(readr)
cnes_pf_manutencao <- read_csv("bases_apoio/cnes_pf_manutencao.csv")
#| warning: FALSE
#| eval: FALSE
cnes_pf_rr <- fetch_datasus(year_start = 2023, month_start = 1,
year_end = 2023, month_end = 1,
uf = "RR", information_system = "CNES-PF")
cnes_tratado <-
cnes_pf_manutencao |>
filter(str_detect(CBO, "2235")) |>
select(CODUFMUN, CBO, VINCULAC)
#| warning: false
vinculac <- read_delim("bases_apoio/vinculac.csv",
delim = ";", escape_double = FALSE, trim_ws = TRUE)
vinculac |>
datatable()
# transformando a variável para tipo numérico para conseguir juntar
cnes_tratado$VINCULAC <- as.numeric(cnes_tratado$VINCULAC)
# Juntar conforme as duas colunas equivalentes - VINCULAC e CHAVE
cnes_join <-
cnes_tratado |>
left_join(vinculac, by = c("VINCULAC"="CHAVE"))
cnes_join |>
head()
cnes_join <-
cnes_join |>
count(CODUFMUN, classificacao) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) |>
mutate(freq = round(freq, 2))
hierarquia_municipios <- read_excel("bases_apoio/hierarquia_municipios.xlsx")
precarizacao <-
cnes_join |>
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) |>
select(CODUFMUN, cod_municipiodv, municipio, uf_sigla, classificacao, freq )
precarizacao |>
datatable()
precarizacao <-
precarizacao |>
filter(classificacao == "Precarizado")
precarizacao <-
precarizacao |>
filter(classificacao == "Precarizado")
precarizacao <-
precarizacao |>
filter(classificacao == "Precarizado")
#| warning: FALSE
#| output: FALSE
rr <- read_municipality(code_muni = "RR", year = 2020)
rr$code_muni <- as.character(rr$code_muni)
shapefile_combinado <- merge(x = rr,
y = precarizacao,
by.x = "code_muni",
by.y = "cod_municipiodv")
shapefile_combinado |>
mapview(zcol = "freq")
View(go)
View(ind_prof_goias)
View(precarizacao)
#| warning: FALSE
#| output: FALSE
go <- read_municipality(code_muni = "GO", year = 2020)
go$code_muni <- as.character(go$code_muni)
shapefile_combinado <- merge(x = go,
y = ind_prof_goias,
by.x = "code_muni",
by.y = "cod_municipiodv")
#| warning: FALSE
#| output: FALSE
go <- read_municipality(code_muni = "GO", year = 2020)
go$code_muni <- as.character(go$code_muni)
shapefile_combinado <- merge(x = go,
y = sexo,
by.x = "code_muni",
by.y = "cod_municipiodv")
precarizacao <-
precarizacao |>
filter(classificacao == "Precarizado")
View(precarizacao)
#| warning: FALSE
#| output: FALSE
rr <- read_municipality(code_muni = "RR", year = 2020)
rr$code_muni <- as.character(rr$code_muni)
shapefile_combinado <- merge(x = rr,
y = precarizacao,
by.x = "code_muni",
by.y = "cod_municipiodv")
#| warning: FALSE
#| output: FALSE
go <- read_municipality(code_muni = "GO", year = 2020)
go$code_muni <- as.character(go$code_muni)
shapefile_combinado <- merge(x = go,
y = sexo,
by.x = "code_muni",
by.y = "cod_municipiodv")
#| warning: FALSE
#| output: FALSE
go <- read_municipality(code_muni = "GO", year = 2020)
go$code_muni <- as.character(go$code_muni)
shapefile_combinado <- merge(x = go,
y = ind_prof_goias,
by.x = "code_muni",
by.y = "CODUFMUN")
shapefile_combinado |>
mapview(zcol = "freq")
shapefile_combinado |>
mapview(zcol = "freq")
go <- read_municipality(code_muni = "GO", year = 2020)
go$code_muni <- as.character(go$code_muni)
shapefile_combinado <- merge(x = go,
y = ind_prof_goias,
by.x = "code_muni",
by.y = "CODUFMUN")
shapefile_combinado |>
mapview(zcol = "freq")
library(readr)
library(dplyr)
library(genderBR)
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
shapefile_combinado |>
mapview(zcol = "freq")
go <- go %>%
mutate(cod_muni_6 = substr(cod_muni, 1, 6))
go <- go %>%
mutate(cod_muni_6 = substr(code_muni, 1, 6))
shapefile_combinado <- merge(x = go,
y = ind_prof_goias,
by.x = "cod_muni_6",
by.y = "CODUFMUN")
shapefile_combinado |>
mapview(zcol = "freq")
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
mutate(freq = round(freq, 2)) %>%
filter(sexo == "Female")
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
#mutate(freq = round(freq, 2)) %>%
filter(sexo == "Female")
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
mutate(sexo = get_gender(NOMEPROF))
#| warning: FALSE
ind_prof_goias <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
#| warning: FALSE
ind_prof_goias <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
mutate(sexo = get_gender(NOMEPROF))
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
mutate(freq = round(freq, 2)) %>%
filter(sexo == "Female")
# Chunk 1
#| warning: FALSE
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
# Chunk 2
#| echo: FALSE
#| output: FALSE
library(readr)
cnes_pf_manutencao <- read_csv("bases_apoio/cnes_pf_manutencao.csv")
# Chunk 3
#| warning: FALSE
#| eval: FALSE
cnes_pf_rr <- fetch_datasus(year_start = 2023, month_start = 1,
year_end = 2023, month_end = 1,
uf = "RR", information_system = "CNES-PF")
# Chunk 4
cnes_tratado <-
cnes_pf_manutencao |>
filter(str_detect(CBO, "2235")) |>
select(CODUFMUN, CBO, VINCULAC)
# Chunk 5
#| warning: false
vinculac <- read_delim("bases_apoio/vinculac.csv",
delim = ";", escape_double = FALSE, trim_ws = TRUE)
vinculac |>
datatable()
# Chunk 6
# transformando a variável para tipo numérico para conseguir juntar
cnes_tratado$VINCULAC <- as.numeric(cnes_tratado$VINCULAC)
# Juntar conforme as duas colunas equivalentes - VINCULAC e CHAVE
cnes_join <-
cnes_tratado |>
left_join(vinculac, by = c("VINCULAC"="CHAVE"))
cnes_join |>
head()
# Chunk 7
cnes_join <-
cnes_join |>
count(CODUFMUN, classificacao) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) |>
mutate(freq = round(freq, 2))
hierarquia_municipios <- read_excel("bases_apoio/hierarquia_municipios.xlsx")
precarizacao <-
cnes_join |>
left_join(hierarquia_municipios, by = c("CODUFMUN"="cod_municipio")) |>
select(CODUFMUN, cod_municipiodv, municipio, uf_sigla, classificacao, freq )
precarizacao |>
datatable()
# Chunk 8
precarizacao <-
precarizacao |>
filter(classificacao == "Precarizado")
# Chunk 9
#| warning: FALSE
#| output: FALSE
rr <- read_municipality(code_muni = "RR", year = 2020)
rr$code_muni <- as.character(rr$code_muni)
shapefile_combinado <- merge(x = rr,
y = precarizacao,
by.x = "code_muni",
by.y = "cod_municipiodv")
# Chunk 10
shapefile_combinado |>
mapview(zcol = "freq")
# Chunk 11
#| warning: FALSE
library(readr)
library(dplyr)
library(genderBR)
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
# Chunk 12
#| warning: FALSE
ind_prof_goias <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
# Chunk 13
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
mutate(sexo = get_gender(NOMEPROF))
# Chunk 14
#| warning: FALSE
ind_prof_goias <- ind_prof_goias %>%
filter(sexo != 'NA') %>%
count(CODUFMUN, sexo) %>%
group_by(CODUFMUN) %>%
mutate(freq = n / sum(n)) %>%
mutate(freq = round(freq, 2)) %>%
filter(sexo == "Female")
# Chunk 15
maps_GO <- read_csv("bases_apoio/ind_prof_goias.csv") %>%
distinct()
# Chunk 16
#| warning: FALSE
#| output: FALSE
go <- read_municipality(code_muni = "GO", year = 2020)
go$code_muni <- as.character(go$code_muni)
go <- go %>%
mutate(cod_muni_6 = substr(code_muni, 1, 6))
shapefile_combinado <- merge(x = go,
y = ind_prof_goias,
by.x = "cod_muni_6",
by.y = "CODUFMUN")
shapefile_combinado |>
mapview(zcol = "freq")
library(microdatasus)
#| warning: FALSE
library(microdatasus)
library(tidyverse)
library(DT)
library(readxl)
library(mapview)
library(geobr)
